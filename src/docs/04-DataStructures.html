<!DOCTYPE html>  <html> <head>   <title>04-DataStructures.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="00-Foreword.html">                 00-Foreword.coffee               </a>                                           <a class="source" href="01-Introduction.html">                 01-Introduction.coffee               </a>                                           <a class="source" href="02-BasicCoffeeScript.html">                 02-BasicCoffeeScript.coffee               </a>                                           <a class="source" href="03-Functions.html">                 03-Functions.coffee               </a>                                           <a class="source" href="04-DataStructures.html">                 04-DataStructures.coffee               </a>                                           <a class="source" href="04-emails.html">                 04-emails.coffee               </a>                                           <a class="source" href="05-ErrorHandling.html">                 05-ErrorHandling.coffee               </a>                                           <a class="source" href="06-FunctionalProgramming.html">                 06-FunctionalProgramming.coffee               </a>                                           <a class="source" href="07-Searching.html">                 07-Searching.coffee               </a>                                           <a class="source" href="08-ObjectOrientation.html">                 08-ObjectOrientation.coffee               </a>                                           <a class="source" href="09-RegularExpressions.html">                 09-RegularExpressions.coffee               </a>                                           <a class="source" href="10-Circular.html">                 10-Circular.coffee               </a>                                           <a class="source" href="10-CircularTest.html">                 10-CircularTest.coffee               </a>                                           <a class="source" href="10-MathFix.html">                 10-MathFix.coffee               </a>                                           <a class="source" href="10-Modularity.html">                 10-Modularity.coffee               </a>                                           <a class="source" href="10-SeedLife.html">                 10-SeedLife.coffee               </a>                                           <a class="source" href="10-TestWebSockets.html">                 10-TestWebSockets.coffee               </a>                                           <a class="source" href="10-WebSocketLife.html">                 10-WebSocketLife.coffee               </a>                                           <a class="source" href="A1-LanguageExtras.html">                 A1-LanguageExtras.coffee               </a>                                           <a class="source" href="A2-BinaryHeap.html">                 A2-BinaryHeap.coffee               </a>                                           <a class="source" href="A2-BinaryHeapTest.html">                 A2-BinaryHeapTest.coffee               </a>                                           <a class="source" href="A3-Microbench.html">                 A3-Microbench.coffee               </a>                                           <a class="source" href="A3-Microtest.html">                 A3-Microtest.py               </a>                                           <a class="source" href="A3-Queen.html">                 A3-Queen.coffee               </a>                                           <a class="source" href="A3-Queens.html">                 A3-Queens.py               </a>                                           <a class="source" href="A4-NoSolutions.html">                 A4-NoSolutions.coffee               </a>                                           <a class="source" href="coffeekup.html">                 coffeekup.coffee               </a>                                           <a class="source" href="prelude.html">                 prelude.coffee               </a>                                           <a class="source" href="underscore.html">                 underscore.coffee               </a>                                           <a class="source" href="ws.html">                 ws.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               04-DataStructures.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nx">require</span> <span class="s1">&#39;./prelude&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Properties</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Properties ---&#39;</span>
<span class="nv">text = </span><span class="s1">&#39;purple haze&#39;</span>
<span class="nx">show</span> <span class="nx">text</span><span class="p">[</span><span class="s1">&#39;length&#39;</span><span class="p">]</span>
<span class="nx">show</span> <span class="nx">text</span><span class="p">.</span><span class="nx">length</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>No property</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- No property ---&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>try/catch is explained in <code>Error Handling</code>,
it lets the script continue after an error.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">try</span>
  <span class="nv">nothing = </span><span class="kc">null</span>
  <span class="nx">show</span> <span class="nx">nothing</span><span class="p">.</span><span class="nx">length</span>
<span class="k">catch</span> <span class="nx">error</span>
  <span class="nx">show</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Object properties</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Object properties ---&#39;</span>
<span class="nv">cat =</span>
  <span class="nv">colour: </span><span class="s1">&#39;grey&#39;</span>
  <span class="nv">name: </span><span class="s1">&#39;Spot&#39;</span>
  <span class="nv">size: </span><span class="mi">46</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Or: cat = {colour: 'grey', name: 'Spot', size: 46}</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">cat.size = </span><span class="mi">47</span>
<span class="nx">show</span> <span class="nx">cat</span><span class="p">.</span><span class="nx">size</span>
<span class="k">delete</span> <span class="nx">cat</span><span class="p">.</span><span class="nx">size</span>
<span class="nx">show</span> <span class="nx">cat</span><span class="p">.</span><span class="nx">size</span>
<span class="nx">show</span> <span class="nx">cat</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Property properties</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Property properties ---&#39;</span>
<span class="nv">empty = </span><span class="p">{}</span>
<span class="nv">empty.notReally = </span><span class="mi">1000</span>
<span class="nx">show</span> <span class="nx">empty</span><span class="p">.</span><span class="nx">notReally</span>

<span class="nv">thing = </span><span class="p">{</span><span class="s1">&#39;gabba gabba&#39;</span><span class="o">:</span> <span class="s1">&#39;hey&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="o">:</span> <span class="mi">10</span><span class="p">}</span>
<span class="nx">show</span> <span class="nx">thing</span><span class="p">[</span><span class="s1">&#39;5&#39;</span><span class="p">]</span>
<span class="nx">thing</span><span class="p">[</span><span class="s1">&#39;5&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>
<span class="nx">show</span> <span class="nx">thing</span><span class="p">[</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">delete</span> <span class="nx">thing</span><span class="p">[</span><span class="s1">&#39;gabba gabba&#39;</span><span class="p">]</span>
<span class="nx">show</span> <span class="nx">thing</span>

<span class="nv">propertyName = </span><span class="s1">&#39;length&#39;</span>
<span class="nv">text = </span><span class="s1">&#39;mainline&#39;</span>
<span class="nx">show</span> <span class="nx">text</span><span class="p">[</span><span class="nx">propertyName</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>The <code>of</code> operator</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- The of operator ---&#39;</span>
<span class="nv">chineseBox = </span><span class="p">{}</span>
<span class="nv">chineseBox.content = </span><span class="nx">chineseBox</span>
<span class="nx">show</span> <span class="s1">&#39;content&#39;</span> <span class="k">of</span> <span class="nx">chineseBox</span>
<span class="nx">show</span> <span class="s1">&#39;content&#39;</span> <span class="k">of</span> <span class="nx">chineseBox</span><span class="p">.</span><span class="nx">content</span>
<span class="nx">show</span> <span class="nx">chineseBox</span><span class="p">,</span> <span class="mi">4</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Showing properties</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Showing properties ---&#39;</span>
<span class="nv">abyss = </span><span class="p">{</span><span class="nx">let</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span> <span class="nx">us</span><span class="o">:</span><span class="nx">go</span><span class="o">:</span><span class="nx">deep</span><span class="o">:</span><span class="nx">down</span><span class="o">:</span><span class="mi">7</span><span class="p">}</span>
<span class="nx">show</span> <span class="nx">abyss</span>
<span class="nx">show</span> <span class="nx">abyss</span><span class="p">,</span> <span class="mi">5</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Exercise 10</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Exercise 10 ---&#39;</span>
<span class="nv">set = </span><span class="p">{</span><span class="s1">&#39;Spot&#39;</span><span class="o">:</span> <span class="kc">true</span><span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Add 'White Fang' to the set</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">set</span><span class="p">[</span><span class="s1">&#39;White Fang&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Remove 'Spot'</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">delete</span> <span class="nx">set</span><span class="p">[</span><span class="s1">&#39;Spot&#39;</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>See if 'Asoka' is in the set</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;Asoka&#39;</span> <span class="k">of</span> <span class="nx">set</span>
<span class="nx">show</span> <span class="s1">&#39;--- End of Exercise ---&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Mutability</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Mutability ---&#39;</span>
<span class="nv">object1 = </span><span class="p">{</span><span class="nv">value: </span><span class="mi">10</span><span class="p">}</span>
<span class="nv">object2 = </span><span class="nx">object1</span>
<span class="nv">object3 = </span><span class="p">{</span><span class="nv">value: </span><span class="mi">10</span><span class="p">}</span>

<span class="nx">show</span> <span class="nx">object1</span> <span class="o">==</span> <span class="nx">object2</span>
<span class="nx">show</span> <span class="nx">object1</span> <span class="o">==</span> <span class="nx">object3</span>

<span class="nv">object1.value = </span><span class="mi">15</span>
<span class="nx">show</span> <span class="nx">object2</span><span class="p">.</span><span class="nx">value</span>
<span class="nx">show</span> <span class="nx">object3</span><span class="p">.</span><span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Data representation</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Data representation ---&#39;</span>

<span class="nv">mailArchive = </span><span class="p">{</span>
  <span class="s1">&#39;the first e-mail&#39;</span><span class="o">:</span> <span class="s1">&#39;Dear nephew, ...&#39;</span>
  <span class="s1">&#39;the second e-mail&#39;</span><span class="o">:</span> <span class="s1">&#39;...&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>and so on ...</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">}</span>

<span class="nv">mailArchive = </span><span class="p">{</span>
  <span class="mi">0</span><span class="o">:</span> <span class="s1">&#39;Dear nephew, ... (mail number 1)&#39;</span>
  <span class="mi">1</span><span class="o">:</span> <span class="s1">&#39;(mail number 2)&#39;</span>
  <span class="mi">2</span><span class="o">:</span> <span class="s1">&#39;(mail number 3)&#39;</span>
<span class="p">}</span>

<span class="k">for</span> <span class="nx">current</span> <span class="k">of</span> <span class="nx">mailArchive</span>
  <span class="nx">show</span> <span class="s1">&#39;Processing e-mail #&#39;</span> <span class="o">+</span> <span class="nx">current</span> <span class="o">+</span>
       <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">mailArchive</span><span class="p">[</span><span class="nx">current</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Arrays</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Arrays ---&#39;</span>
<span class="nv">mailArchive = </span><span class="p">[</span><span class="s1">&#39;mail one&#39;</span><span class="p">,</span> <span class="s1">&#39;mail two&#39;</span><span class="p">,</span> <span class="s1">&#39;mail three&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="nx">current</span> <span class="k">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">...</span><span class="nx">mailArchive</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span>
  <span class="nx">show</span> <span class="s1">&#39;Processing e-mail #&#39;</span> <span class="o">+</span> <span class="nx">current</span> <span class="o">+</span>
       <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">mailArchive</span><span class="p">[</span><span class="nx">current</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Exercise 11</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Exercise 11 ---&#39;</span>
<span class="nv">range = </span><span class="nf">(upto) -&gt;</span>
  <span class="nv">result = </span><span class="p">[]</span>
  <span class="nv">i = </span><span class="mi">0</span>
  <span class="k">while</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">upto</span>
    <span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">i</span>
    <span class="nx">i</span><span class="o">++</span>
  <span class="nx">result</span>
<span class="nx">show</span> <span class="nx">range</span> <span class="mi">4</span>

<span class="nv">range = </span><span class="nf">(upto) -&gt;</span> <span class="nx">i</span> <span class="k">for</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">..</span><span class="nx">upto</span><span class="p">]</span>
<span class="nx">show</span> <span class="nx">range</span> <span class="mi">4</span>
<span class="nv">range = </span><span class="nf">(upto) -&gt;</span> <span class="p">[</span><span class="mi">0</span><span class="p">..</span><span class="nx">upto</span><span class="p">]</span>
<span class="nx">show</span> <span class="nx">range</span> <span class="mi">4</span>
<span class="nx">show</span> <span class="s1">&#39;--- End of Exercise ---&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>For expression</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- For expression ---&#39;</span>
<span class="nv">numbers = </span><span class="p">(</span><span class="nx">number</span> <span class="k">for</span> <span class="nx">number</span> <span class="k">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">..</span><span class="mi">12</span><span class="p">]</span> <span class="k">by</span> <span class="mi">2</span><span class="p">)</span>
<span class="nx">show</span> <span class="nx">numbers</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Methods on objects</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Methods on objects ---&#39;</span>
<span class="nv">doh = </span><span class="s1">&#39;Doh&#39;</span>
<span class="nx">show</span> <span class="k">typeof</span> <span class="nx">doh</span><span class="p">.</span><span class="nx">toUpperCase</span>
<span class="nx">show</span> <span class="nx">doh</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span>

<span class="nv">mack = </span><span class="p">[]</span>
<span class="nx">mack</span><span class="p">.</span><span class="nx">push</span> <span class="s1">&#39;Mack&#39;</span>
<span class="nx">mack</span><span class="p">.</span><span class="nx">push</span> <span class="s1">&#39;the&#39;</span>
<span class="nx">mack</span><span class="p">.</span><span class="nx">push</span> <span class="s1">&#39;Knife&#39;</span>
<span class="nx">show</span> <span class="nx">mack</span><span class="p">.</span><span class="nx">join</span> <span class="s1">&#39; &#39;</span>
<span class="nx">show</span> <span class="nx">mack</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span>
<span class="nx">show</span> <span class="nx">mack</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Emails</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Emails ---&#39;</span>
<span class="nv">mailArchive = </span><span class="p">(</span><span class="nx">require</span> <span class="s2">&quot;./04-emails&quot;</span><span class="p">).</span><span class="nx">retrieveMails</span><span class="p">()</span>

<span class="k">for</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">mailArchive</span>
  <span class="nx">show</span> <span class="s2">&quot;Processing e-mail ##{i} #{email[0..15]}...&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Do more things...</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Split</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Split ---&#39;</span>
<span class="nv">words = </span><span class="s1">&#39;Cities of the Interior&#39;</span>
<span class="nx">show</span> <span class="nx">words</span><span class="p">.</span><span class="nx">split</span> <span class="s1">&#39; &#39;</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Exercise 12</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Exercise 12 ---&#39;</span>
<span class="nv">array = </span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c d&#39;</span><span class="p">]</span>
<span class="nx">show</span> <span class="nx">array</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="nx">show</span> <span class="s1">&#39;--- End of Exercise ---&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Splitting strings</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Splitting strings ---&#39;</span>
<span class="nv">paragraph = </span><span class="s1">&#39;born 15-11-2003 (mother Spot): White Fang&#39;</span>
<span class="nx">show</span> <span class="nx">paragraph</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;b&#39;</span> <span class="o">&amp;&amp;</span>
     <span class="nx">paragraph</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;o&#39;</span> <span class="o">&amp;&amp;</span>
     <span class="nx">paragraph</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;r&#39;</span> <span class="o">&amp;&amp;</span>
     <span class="nx">paragraph</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;n&#39;</span>

<span class="nx">show</span> <span class="nx">paragraph</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;born&#39;</span>
<span class="nx">show</span> <span class="nx">paragraph</span><span class="p">[</span><span class="mi">0</span><span class="p">...</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;born&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Exercise 13</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Exercise 13 ---&#39;</span>
<span class="nv">startsWith = </span><span class="nf">(string, pattern) -&gt;</span>
  <span class="nx">string</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">pattern</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">==</span> <span class="nx">pattern</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>or</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">startsWith = </span><span class="nf">(string, pattern) -&gt;</span>
  <span class="nx">string</span><span class="p">[</span><span class="mi">0</span><span class="p">...</span><span class="nx">pattern</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">==</span> <span class="nx">pattern</span>
<span class="nx">show</span> <span class="nx">startsWith</span> <span class="s1">&#39;rotation&#39;</span><span class="p">,</span> <span class="s1">&#39;rot&#39;</span>
<span class="nx">show</span> <span class="s1">&#39;--- End of Exercise ---&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>String boundaries</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- String boundaries ---&#39;</span>
<span class="nx">show</span> <span class="s1">&#39;Pip&#39;</span><span class="p">.</span><span class="nx">charAt</span> <span class="mi">250</span>
<span class="nx">show</span> <span class="s1">&#39;Nop&#39;</span><span class="p">.</span><span class="nx">slice</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span>
<span class="nx">show</span> <span class="s1">&#39;Pin&#39;</span><span class="p">[</span><span class="mi">1</span><span class="p">...</span><span class="mi">10</span><span class="p">]</span>
<span class="nx">show</span> <span class="nx">startsWith</span><span class="p">(</span><span class="s1">&#39;Idiots&#39;</span><span class="p">,</span> <span class="s1">&#39;Most honoured colleagues&#39;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Test of startsWith</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">show</span> <span class="s1">&#39;--- Test of startsWith ---&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Reference implementation</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">startsWithRef = </span><span class="nf">(str, pat) -&gt;</span>
  <span class="k">if</span> <span class="o">!</span><span class="nx">str</span><span class="o">?</span> <span class="o">or</span> <span class="o">!</span><span class="nx">pat</span><span class="o">?</span> <span class="k">then</span> <span class="k">return</span>
  <span class="nv">ref = </span><span class="kc">true</span>
  <span class="k">for</span> <span class="nx">ch</span><span class="p">,</span> <span class="nx">ix</span> <span class="k">in</span> <span class="nx">pat</span>
    <span class="k">if</span> <span class="o">not</span> <span class="nv">ref = </span><span class="nx">str</span><span class="p">[</span><span class="nx">ix</span><span class="p">]</span> <span class="o">is</span> <span class="nx">ch</span>
      <span class="k">break</span>
  <span class="nx">ref</span>

<span class="nx">qc</span><span class="p">.</span><span class="nx">declare</span> <span class="s1">&#39;startsWith matches reference&#39;</span><span class="p">,</span>
  <span class="p">[</span><span class="nx">qc</span><span class="p">.</span><span class="nx">arbString</span><span class="p">,</span> <span class="nx">qc</span><span class="p">.</span><span class="nx">arbString</span><span class="p">],</span>
  <span class="nf">(c, str, pat) -&gt;</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">collect</span> <span class="nv">ref = </span><span class="nx">startsWithRef</span> <span class="nx">str</span><span class="p">,</span> <span class="nx">pat</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">assert</span> <span class="nx">ref</span> <span class="o">==</span> <span class="nx">startsWith</span> <span class="nx">str</span><span class="p">,</span> <span class="nx">pat</span>

<span class="nx">qc</span><span class="p">.</span><span class="nx">declare</span> <span class="s1">&#39;startsWith matches substrings&#39;</span><span class="p">,</span>
  <span class="p">[</span><span class="nx">qc</span><span class="p">.</span><span class="nx">arbString</span><span class="p">,</span> <span class="nx">qc</span><span class="p">.</span><span class="nx">arbWholeNum</span><span class="p">],</span>
  <span class="nf">(c, str, len) -&gt;</span>
    <span class="nv">pat = </span><span class="nx">str</span><span class="p">[</span><span class="mi">0</span><span class="p">...</span><span class="nx">len</span><span class="p">]</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">collect</span> <span class="nv">ref = </span><span class="nx">startsWithRef</span> <span class="nx">str</span><span class="p">,</span> <span class="nx">pat</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">assert</span> <span class="nx">ref</span> <span class="o">==</span> <span class="nx">startsWith</span> <span class="nx">str</span><span class="p">,</span> <span class="nx">pat</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Add <code>if !string? or !pattern? then return</code>
to <code>startsWith</code> to make it succeed this test</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">qc</span><span class="p">.</span><span class="nx">declare</span> <span class="s1">&#39;startsWith handles null/undefined&#39;</span><span class="p">,</span>
  <span class="p">[</span><span class="nx">qc</span><span class="p">.</span><span class="nx">arbNullOr</span><span class="p">(</span><span class="nx">qc</span><span class="p">.</span><span class="nx">arbUndefOr</span><span class="p">(</span><span class="nx">qc</span><span class="p">.</span><span class="nx">arbString</span><span class="p">)),</span>
   <span class="nx">qc</span><span class="p">.</span><span class="nx">arbNullOr</span><span class="p">(</span><span class="nx">qc</span><span class="p">.</span><span class="nx">arbUndefOr</span><span class="p">(</span><span class="nx">qc</span><span class="p">.</span><span class="nx">arbString</span><span class="p">))],</span>
  <span class="nx">qc</span><span class="p">.</span><span class="nx">failOnException</span> <span class="nf">(c, str, pat) -&gt;</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">collect</span> <span class="nv">ref = </span><span class="nx">startsWithRef</span> <span class="nx">str</span><span class="p">,</span> <span class="nx">pat</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">assert</span> <span class="nx">ref</span> <span class="o">==</span> <span class="nx">startsWith</span> <span class="nx">str</span><span class="p">,</span> <span class="nx">pat</span>

<span class="nx">qc</span><span class="p">.</span><span class="nx">test</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Quick hack to avoid garbling of output
when async test cases are reported.
A better idea is one test suite in one file.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">setTimeout</span> <span class="p">(</span> <span class="o">-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Exercise 14</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Exercise 14 ---&#39;</span>
  <span class="nv">catNames = </span><span class="nf">(paragraph) -&gt;</span>
    <span class="nv">colon = </span><span class="nx">paragraph</span><span class="p">.</span><span class="nx">indexOf</span> <span class="s1">&#39;:&#39;</span>
    <span class="nx">paragraph</span><span class="p">[</span><span class="nx">colon</span><span class="o">+</span><span class="mi">2</span><span class="p">...].</span><span class="nx">split</span> <span class="s1">&#39;, &#39;</span>

  <span class="nx">show</span> <span class="nx">catNames</span> <span class="s1">&#39;born 20/09/2004 (mother Yellow Bess): &#39;</span> <span class="o">+</span>
                <span class="s1">&#39;Doctor Hobbles the 2nd, Noog&#39;</span>
  <span class="nx">show</span> <span class="s1">&#39;--- End of Exercise ---&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Find living cats</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Find living cats ---&#39;</span>
  <span class="nv">mailArchive = </span><span class="p">(</span><span class="nx">require</span> <span class="s1">&#39;./04-emails&#39;</span><span class="p">).</span><span class="nx">retrieveMails</span><span class="p">()</span>
  <span class="nv">livingCats = </span><span class="s1">&#39;Spot&#39;</span><span class="o">:</span> <span class="kc">true</span>

  <span class="k">for</span> <span class="nx">email</span> <span class="k">in</span> <span class="nx">mailArchive</span>
    <span class="nv">paragraphs = </span><span class="nx">email</span><span class="p">.</span><span class="nx">split</span> <span class="s1">&#39;\n&#39;</span>
    <span class="k">for</span> <span class="nx">paragraph</span> <span class="k">in</span> <span class="nx">paragraphs</span>
      <span class="k">if</span> <span class="nx">startsWith</span> <span class="nx">paragraph</span><span class="p">,</span> <span class="s1">&#39;born&#39;</span>
        <span class="nv">names = </span><span class="nx">catNames</span> <span class="nx">paragraph</span>
        <span class="k">for</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">names</span>
          <span class="nx">livingCats</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span>
      <span class="k">else</span> <span class="k">if</span> <span class="nx">startsWith</span> <span class="nx">paragraph</span><span class="p">,</span> <span class="s1">&#39;died&#39;</span>
        <span class="nv">names = </span><span class="nx">catNames</span> <span class="nx">paragraph</span>
        <span class="k">for</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">names</span>
          <span class="k">delete</span> <span class="nx">livingCats</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span>

  <span class="nx">show</span> <span class="nx">livingCats</span>

  <span class="k">if</span> <span class="s1">&#39;Spot&#39;</span> <span class="k">in</span> <span class="nx">livingCats</span>
    <span class="nx">show</span> <span class="s1">&#39;Spot lives!&#39;</span>
  <span class="k">else</span>
    <span class="nx">show</span> <span class="s1">&#39;Good old Spot, may she rest in peace.&#39;</span>

  <span class="k">for</span> <span class="nx">cat</span> <span class="k">of</span> <span class="nx">livingCats</span>
    <span class="nx">show</span> <span class="nx">cat</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Set functions</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Set functions ---&#39;</span>
  <span class="nv">addToSet = </span><span class="nf">(set, values) -&gt;</span>
    <span class="k">for</span> <span class="nx">value</span> <span class="k">in</span> <span class="nx">values</span>
      <span class="nx">set</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span>

  <span class="nv">removeFromSet = </span><span class="nf">(set, values) -&gt;</span>
    <span class="k">for</span> <span class="nx">value</span> <span class="k">in</span> <span class="nx">values</span>
      <span class="k">delete</span> <span class="nx">set</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span>

  <span class="nv">livingCats = Spot: </span><span class="kc">true</span>

  <span class="k">for</span> <span class="nx">email</span> <span class="k">in</span> <span class="nx">mailArchive</span>
    <span class="nv">paragraphs = </span><span class="nx">email</span><span class="p">.</span><span class="nx">split</span> <span class="s1">&#39;\n&#39;</span>
    <span class="k">for</span> <span class="nx">paragraph</span> <span class="k">in</span> <span class="nx">paragraphs</span>
      <span class="k">if</span> <span class="nx">startsWith</span> <span class="nx">paragraph</span><span class="p">,</span> <span class="s1">&#39;born&#39;</span>
        <span class="nx">addToSet</span> <span class="nx">livingCats</span><span class="p">,</span> <span class="nx">catNames</span> <span class="nx">paragraph</span>
      <span class="k">else</span> <span class="k">if</span> <span class="nx">startsWith</span> <span class="nx">paragraph</span><span class="p">,</span> <span class="s1">&#39;died&#39;</span>
        <span class="nx">removeFromSet</span> <span class="nx">livingCats</span><span class="p">,</span> <span class="nx">catNames</span> <span class="nx">paragraph</span>

  <span class="nx">show</span> <span class="nx">livingCats</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Cat functions</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Cat functions ---&#39;</span>

  <span class="nv">findLivingCats = </span><span class="o">-&gt;</span>
    <span class="nv">mailArchive = </span><span class="p">(</span><span class="nx">require</span> <span class="s1">&#39;./04-emails&#39;</span><span class="p">).</span><span class="nx">retrieveMails</span><span class="p">()</span>
    <span class="nv">livingCats = </span><span class="s1">&#39;Spot&#39;</span><span class="o">:</span> <span class="kc">true</span>

    <span class="nv">handleParagraph = </span><span class="nf">(paragraph) -&gt;</span>
      <span class="k">if</span> <span class="nx">startsWith</span> <span class="nx">paragraph</span><span class="p">,</span> <span class="s1">&#39;born&#39;</span>
        <span class="nx">addToSet</span> <span class="nx">livingCats</span><span class="p">,</span> <span class="nx">catNames</span> <span class="nx">paragraph</span>
      <span class="k">else</span> <span class="k">if</span> <span class="nx">startsWith</span> <span class="nx">paragraph</span><span class="p">,</span> <span class="s1">&#39;died&#39;</span>
        <span class="nx">removeFromSet</span> <span class="nx">livingCats</span><span class="p">,</span> <span class="nx">catNames</span> <span class="nx">paragraph</span>

    <span class="k">for</span> <span class="nx">email</span> <span class="k">in</span> <span class="nx">mailArchive</span>
      <span class="nv">paragraphs = </span><span class="nx">email</span><span class="p">.</span><span class="nx">split</span> <span class="s1">&#39;\n&#39;</span>
      <span class="k">for</span> <span class="nx">paragraph</span> <span class="k">in</span> <span class="nx">paragraphs</span>
        <span class="nx">handleParagraph</span> <span class="nx">paragraph</span>

    <span class="nx">livingCats</span>

  <span class="nv">howMany = </span><span class="mi">0</span>
  <span class="k">for</span> <span class="nx">cat</span> <span class="k">of</span> <span class="nx">findLivingCats</span><span class="p">()</span>
    <span class="nx">howMany</span><span class="o">++</span>
  <span class="nx">show</span> <span class="s1">&#39;There are &#39;</span> <span class="o">+</span> <span class="nx">howMany</span> <span class="o">+</span> <span class="s1">&#39; cats.&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Dates</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Dates ---&#39;</span>
  <span class="nv">whenWasIt = year: </span><span class="mi">1980</span><span class="p">,</span> <span class="nv">month: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">day: </span><span class="mi">1</span>
  <span class="nx">show</span> <span class="nx">whenWasIt</span>
  <span class="nv">whenWasIt = </span><span class="k">new</span> <span class="nb">Date</span> <span class="mi">1980</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
  <span class="nx">show</span> <span class="nx">whenWasIt</span>

  <span class="nx">show</span> <span class="k">new</span> <span class="nb">Date</span>
  <span class="nx">show</span> <span class="k">new</span> <span class="nb">Date</span> <span class="mi">1980</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
  <span class="nx">show</span> <span class="k">new</span> <span class="nb">Date</span> <span class="mi">2007</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>Date getters</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Date getters ---&#39;</span>
  <span class="nv">today = </span><span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
  <span class="nx">show</span> <span class="s2">&quot;Year: #{today.getFullYear()}</span>
<span class="s2"> month: #{today.getMonth()}</span>
<span class="s2"> day: #{today.getDate()}&quot;</span>
  <span class="nx">show</span> <span class="s2">&quot;Hour: #{today.getHours()}</span>
<span class="s2"> minutes: #{today.getMinutes()}</span>
<span class="s2"> seconds: #{today.getSeconds()}&quot;</span>
  <span class="nx">show</span> <span class="s2">&quot;Day of week: #{today.getDay()}&quot;</span>

  <span class="nv">today = </span><span class="k">new</span> <span class="nb">Date</span><span class="p">()</span>
  <span class="nx">show</span> <span class="nx">today</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Comparing dates</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Comparing dates ---&#39;</span>
  <span class="nv">wallFall = </span><span class="k">new</span> <span class="nb">Date</span> <span class="mi">1989</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span>
  <span class="nv">gulfWarOne = </span><span class="k">new</span> <span class="nb">Date</span> <span class="mi">1990</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span>
  <span class="nx">show</span> <span class="nx">wallFall</span> <span class="o">&lt;</span> <span class="nx">gulfWarOne</span>
  <span class="nx">show</span> <span class="nx">wallFall</span> <span class="o">==</span> <span class="nx">wallFall</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>but</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="nx">wallFall</span> <span class="o">==</span> <span class="k">new</span> <span class="nb">Date</span> <span class="mi">1989</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span>

  <span class="nv">wallFall1 = </span><span class="k">new</span> <span class="nb">Date</span> <span class="mi">1989</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span>
  <span class="nv">wallFall2 = </span><span class="k">new</span> <span class="nb">Date</span> <span class="mi">1989</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span>
  <span class="nx">show</span> <span class="nx">wallFall1</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">==</span> <span class="nx">wallFall2</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Timezones</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Timezones ---&#39;</span>
  <span class="nv">now = </span><span class="k">new</span> <span class="nb">Date</span><span class="p">()</span>
  <span class="nx">show</span> <span class="nx">now</span><span class="p">.</span><span class="nx">getTimezoneOffset</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>Exercise 15</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Exercise 15 ---&#39;</span>
  <span class="nv">extractDate = </span><span class="nf">(paragraph) -&gt;</span>
    <span class="nv">numberAt = </span><span class="nf">(start, length) -&gt;</span>
      <span class="nb">Number</span> <span class="nx">paragraph</span><span class="p">[</span><span class="nx">start</span><span class="p">...</span><span class="nx">start</span> <span class="o">+</span> <span class="nx">length</span><span class="p">]</span>
    <span class="k">new</span> <span class="nb">Date</span> <span class="nx">numberAt</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>     <span class="c1"># Year</span>
             <span class="nx">numberAt</span><span class="p">(</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="c1"># Month</span>
             <span class="nx">numberAt</span><span class="p">(</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>      <span class="c1"># Day</span>
  <span class="nx">show</span> <span class="nx">extractDate</span> <span class="s1">&#39;died 27-04-2006: Black Leclre&#39;</span>
  <span class="nx">show</span> <span class="s1">&#39;--- End of Exercise ---&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Record functions</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Record functions ---&#39;</span>
  <span class="nv">catRecord = </span><span class="nf">(name, birthdate, mother) -&gt;</span>
    <span class="nv">name: </span>  <span class="nx">name</span>
    <span class="nv">birth: </span> <span class="nx">birthdate</span>
    <span class="nv">mother: </span><span class="nx">mother</span>

  <span class="nv">addCats = </span><span class="nf">(set, names, birthdate, mother) -&gt;</span>
    <span class="k">for</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">names</span>
      <span class="nx">set</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">catRecord</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">birthdate</span><span class="p">,</span> <span class="nx">mother</span>

  <span class="nv">deadCats = </span><span class="nf">(set, names, deathdate) -&gt;</span>
    <span class="k">for</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">names</span>
      <span class="nx">set</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nv">death = </span><span class="nx">deathdate</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Extract function</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Extract function ---&#39;</span>
  <span class="nv">extractMother = </span><span class="nf">(paragraph) -&gt;</span>
    <span class="nv">start = </span><span class="nx">paragraph</span><span class="p">.</span><span class="nx">indexOf</span> <span class="s1">&#39;(mother &#39;</span>
    <span class="nx">start</span> <span class="o">+=</span> <span class="s1">&#39;(mother &#39;</span><span class="p">.</span><span class="nx">length</span>
    <span class="nv">end = </span><span class="nx">paragraph</span><span class="p">.</span><span class="nx">indexOf</span> <span class="s1">&#39;)&#39;</span>
    <span class="nx">paragraph</span><span class="p">[</span><span class="nx">start</span><span class="p">...</span><span class="nx">end</span><span class="p">]</span>

  <span class="nx">show</span> <span class="nx">extractMother</span> <span class="o">\</span>
    <span class="s1">&#39;born 15/11/2003 (mother Spot): White Fang&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>Exercise 16</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Exercise 16 ---&#39;</span>
  <span class="nv">between = </span><span class="nf">(string, start, end) -&gt;</span>
    <span class="nv">startAt = </span><span class="nx">string</span><span class="p">.</span><span class="nx">indexOf</span> <span class="nx">start</span>
    <span class="nx">startAt</span> <span class="o">+=</span> <span class="nx">start</span><span class="p">.</span><span class="nx">length</span>
    <span class="nv">endAt = </span><span class="nx">string</span><span class="p">.</span><span class="nx">indexOf</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">startAt</span>
    <span class="nx">string</span><span class="p">[</span><span class="nx">startAt</span><span class="p">...</span><span class="nx">endAt</span><span class="p">]</span>
  <span class="nx">show</span> <span class="nx">between</span> <span class="s1">&#39;bu ] boo [ bah ] gzz&#39;</span><span class="p">,</span> <span class="s1">&#39;[ &#39;</span><span class="p">,</span> <span class="s1">&#39; ]&#39;</span>
  <span class="nx">show</span> <span class="s1">&#39;--- End of Exercise ---&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>Shorter extract function</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Shorter extract function ---&#39;</span>
  <span class="nv">extractMother = </span><span class="nf">(paragraph) -&gt;</span>
    <span class="nx">between</span> <span class="nx">paragraph</span><span class="p">,</span> <span class="s1">&#39;(mother &#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span>
  <span class="nx">show</span> <span class="nx">extractMother</span> <span class="o">\</span>
    <span class="s1">&#39;born 15/11/2003 (mother Spot): White Fang&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p>Improved cat-algorithm</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Improved cat-algorithm ---&#39;</span>
  <span class="nv">findCats = </span><span class="o">-&gt;</span>
    <span class="nv">mailArchive = </span><span class="p">(</span><span class="nx">require</span> <span class="s1">&#39;./04-emails&#39;</span><span class="p">).</span><span class="nx">retrieveMails</span><span class="p">()</span>
    <span class="nv">cats = </span><span class="p">{</span><span class="s1">&#39;Spot&#39;</span><span class="o">:</span> <span class="nx">catRecord</span> <span class="s1">&#39;Spot&#39;</span><span class="p">,</span>
      <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">1997</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="s1">&#39;unknown&#39;</span><span class="p">}</span>
  
    <span class="nv">handleParagraph = </span><span class="nf">(paragraph) -&gt;</span>
      <span class="k">if</span> <span class="nx">startsWith</span> <span class="nx">paragraph</span><span class="p">,</span> <span class="s1">&#39;born&#39;</span>
        <span class="nx">addCats</span> <span class="nx">cats</span><span class="p">,</span> <span class="nx">catNames</span><span class="p">(</span><span class="nx">paragraph</span><span class="p">),</span>
                <span class="nx">extractDate</span><span class="p">(</span><span class="nx">paragraph</span><span class="p">),</span>
                <span class="nx">extractMother</span><span class="p">(</span><span class="nx">paragraph</span><span class="p">)</span>
      <span class="k">else</span> <span class="k">if</span> <span class="nx">startsWith</span> <span class="nx">paragraph</span><span class="p">,</span> <span class="s1">&#39;died&#39;</span>
        <span class="nx">deadCats</span> <span class="nx">cats</span><span class="p">,</span> <span class="nx">catNames</span><span class="p">(</span><span class="nx">paragraph</span><span class="p">),</span>
                 <span class="nx">extractDate</span><span class="p">(</span><span class="nx">paragraph</span><span class="p">)</span>

    <span class="k">for</span> <span class="nx">email</span> <span class="k">in</span> <span class="nx">mailArchive</span>
      <span class="nv">paragraphs = </span><span class="nx">email</span><span class="p">.</span><span class="nx">split</span> <span class="s1">&#39;\n&#39;</span>
      <span class="k">for</span> <span class="nx">paragraph</span> <span class="k">in</span> <span class="nx">paragraphs</span>
        <span class="nx">handleParagraph</span> <span class="nx">paragraph</span>
    <span class="nx">cats</span>

  <span class="nv">catData = </span><span class="nx">findCats</span><span class="p">()</span>
  <span class="nx">show</span> <span class="nx">catData</span></pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>Information functions</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Information functions ---&#39;</span>
  <span class="nv">formatDate = </span><span class="nf">(date) -&gt;</span> <span class="s2">&quot;#{date.getDate()}/&quot;</span> <span class="o">+</span>
                         <span class="s2">&quot;#{date.getMonth() + 1}/&quot;</span> <span class="o">+</span>
                         <span class="s2">&quot;#{date.getFullYear()}&quot;</span>
  <span class="nv">catInfo = </span><span class="nf">(data, name) -&gt;</span>
    <span class="nx">unless</span> <span class="nx">name</span> <span class="k">of</span> <span class="nx">data</span>
      <span class="k">return</span> <span class="s2">&quot;No cat by the name of #{name} is known.&quot;</span>
    <span class="nv">cat = </span><span class="nx">data</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span>
    <span class="nv">message = </span><span class="s2">&quot;#{name},&quot;</span> <span class="o">+</span>
              <span class="s2">&quot; born #{formatDate cat.birth}&quot;</span> <span class="o">+</span>
              <span class="s2">&quot; from mother #{cat.mother}&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;death&quot;</span> <span class="k">of</span> <span class="nx">cat</span>
      <span class="nx">message</span> <span class="o">+=</span> <span class="s2">&quot;, died #{formatDate cat.death}&quot;</span>
    <span class="s2">&quot;#{message}.&quot;</span>

  <span class="nx">show</span> <span class="nx">catInfo</span> <span class="nx">catData</span><span class="p">,</span> <span class="s2">&quot;Fat Igor&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-49">&#182;</a>               </div>               <p>Exercise 17</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Exercise 17 ---&#39;</span>
  <span class="nv">formatDate = </span><span class="nf">(date) -&gt;</span>
    <span class="nv">pad = </span><span class="nf">(number) -&gt;</span>
      <span class="k">if</span> <span class="nx">number</span> <span class="o">&lt;</span> <span class="mi">10</span>
        <span class="s2">&quot;0&quot;</span> <span class="o">+</span> <span class="nx">number</span>
      <span class="k">else</span>
        <span class="nx">number</span>
    <span class="s2">&quot;#{pad date.getDate()}/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;#{pad date.getMonth() + 1}/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;#{date.getFullYear()}&quot;</span>

  <span class="nx">show</span> <span class="nx">formatDate</span> <span class="k">new</span> <span class="nb">Date</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
  <span class="nx">show</span> <span class="s1">&#39;--- End of Exercise ---&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-50">&#182;</a>               </div>               <p>Exercise 18</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Exercise 18 ---&#39;</span>
  <span class="nv">oldestCat = </span><span class="nf">(data) -&gt;</span>
    <span class="nv">oldest = </span><span class="kc">null</span>
    <span class="k">for</span> <span class="nx">name</span> <span class="k">of</span> <span class="nx">data</span>
      <span class="nv">cat = </span><span class="nx">data</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span>
      <span class="nx">unless</span> <span class="s1">&#39;death&#39;</span> <span class="k">of</span> <span class="nx">cat</span>
        <span class="k">if</span> <span class="nx">oldest</span> <span class="o">is</span> <span class="kc">null</span> <span class="o">or</span> <span class="nx">oldest</span><span class="p">.</span><span class="nx">birth</span> <span class="o">&gt;</span> <span class="nx">cat</span><span class="p">.</span><span class="nx">birth</span>
          <span class="nv">oldest = </span><span class="nx">cat</span>
    <span class="nx">oldest</span><span class="o">?</span><span class="p">.</span><span class="nx">name</span>
  <span class="nx">show</span> <span class="nx">oldestCat</span> <span class="nx">catData</span>

  <span class="k">for</span> <span class="nx">cat</span><span class="p">,</span> <span class="nx">info</span> <span class="k">of</span> <span class="nx">catData</span> <span class="c1"># Test with dead cats</span>
    <span class="k">delete</span> <span class="nx">catData</span><span class="p">[</span><span class="nx">cat</span><span class="p">]</span> <span class="nx">unless</span> <span class="s1">&#39;death&#39;</span> <span class="k">of</span> <span class="nx">info</span>
  <span class="nx">show</span> <span class="nx">oldestCat</span> <span class="nx">catData</span>
  <span class="nx">show</span> <span class="s1">&#39;--- End of Exercise ---&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-51">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-51">&#182;</a>               </div>               <p>Variable arguments</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Variable arguments ---&#39;</span>
  <span class="nv">argumentCounter = </span><span class="o">-&gt;</span>
    <span class="nx">show</span> <span class="s2">&quot;You gave me #{arguments.length} arguments.&quot;</span>
  <span class="nx">argumentCounter</span> <span class="s1">&#39;Death&#39;</span><span class="p">,</span> <span class="s1">&#39;Famine&#39;</span><span class="p">,</span> <span class="s1">&#39;Pestilence&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-52">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-52">&#182;</a>               </div>               <p>Print variable arguments</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Print variable arguments ---&#39;</span>
  <span class="nv">print = </span><span class="o">-&gt;</span> <span class="nx">show</span> <span class="nx">arg</span> <span class="k">for</span> <span class="nx">arg</span> <span class="k">in</span> <span class="nx">arguments</span>

  <span class="nx">print</span> <span class="s1">&#39;From here to&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span></pre></div>             </td>           </tr>                               <tr id="section-53">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-53">&#182;</a>               </div>               <p>Optional arguments</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Optional arguments ---&#39;</span>
  <span class="nv">add = </span><span class="nf">(number, howmuch) -&gt;</span>
    <span class="k">if</span>  <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span>
      <span class="nv">howmuch = </span><span class="mi">1</span>
    <span class="nx">number</span> <span class="o">+</span> <span class="nx">howmuch</span>

  <span class="nx">show</span> <span class="nx">add</span> <span class="mi">6</span>
  <span class="nx">show</span> <span class="nx">add</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span></pre></div>             </td>           </tr>                               <tr id="section-54">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-54">&#182;</a>               </div>               <p>Exercise 19</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Exercise 19 ---&#39;</span>
  <span class="nv">range = </span><span class="nf">(start, end) -&gt;</span>
    <span class="k">if</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span>
      <span class="nv">end = </span><span class="nx">start</span>
      <span class="nv">start = </span><span class="mi">0</span>
    <span class="nv">result = </span><span class="p">[]</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">[</span><span class="nx">start</span><span class="p">..</span><span class="nx">end</span><span class="p">]</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">push</span> <span class="nx">i</span>
    <span class="nx">result</span>

  <span class="nx">show</span> <span class="nx">range</span> <span class="mi">4</span>
  <span class="nx">show</span> <span class="nx">range</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span>
  <span class="nx">show</span> <span class="s1">&#39;--- End of Exercise ---&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-55">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-55">&#182;</a>               </div>               <p>Exercise 20</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Exercise 20 ---&#39;</span>
  <span class="nv">sum = </span><span class="nf">(numbers) -&gt;</span>
    <span class="nv">total = </span><span class="mi">0</span>
    <span class="k">for</span> <span class="nx">num</span> <span class="k">in</span> <span class="nx">numbers</span>
      <span class="nx">total</span> <span class="o">+=</span> <span class="nx">num</span>
    <span class="nx">total</span>

  <span class="nx">show</span> <span class="nx">sum</span> <span class="p">[</span><span class="mi">1</span><span class="p">..</span><span class="mi">10</span><span class="p">]</span>
  <span class="nx">show</span> <span class="nx">sum</span> <span class="nx">range</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span>
  <span class="nx">show</span> <span class="s1">&#39;--- End of Exercise ---&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-56">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-56">&#182;</a>               </div>               <p>Hidden built-in properties</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Hidden properties ---&#39;</span>
  <span class="k">for</span> <span class="nx">name</span> <span class="k">of</span> <span class="nb">Math</span>
    <span class="nx">show</span> <span class="nx">name</span></pre></div>             </td>           </tr>                               <tr id="section-57">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-57">&#182;</a>               </div>               <p>Hidden array properties</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Hidden array properties ---&#39;</span>
  <span class="k">for</span> <span class="nx">name</span> <span class="k">of</span> <span class="p">[</span><span class="s1">&#39;Huey&#39;</span><span class="p">,</span> <span class="s1">&#39;Dewey&#39;</span><span class="p">,</span> <span class="s1">&#39;Loui&#39;</span><span class="p">]</span>
    <span class="nx">show</span> <span class="nx">name</span></pre></div>             </td>           </tr>                               <tr id="section-58">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-58">&#182;</a>               </div>               <p>Show hidden properties</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Show hidden properties ---&#39;</span>
  <span class="nx">show</span> <span class="nb">Math</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="kc">true</span>
  <span class="nx">show</span> <span class="p">[</span><span class="s1">&#39;Huey&#39;</span><span class="p">,</span> <span class="s1">&#39;Dewey&#39;</span><span class="p">,</span> <span class="s1">&#39;Loui&#39;</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-59">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-59">&#182;</a>               </div>               <p>Watched properties</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">show</span> <span class="s1">&#39;--- Watched properties ---&#39;</span>
  <span class="nv">array = </span><span class="p">[</span><span class="s1">&#39;Heaven&#39;</span><span class="p">,</span> <span class="s1">&#39;Earth&#39;</span><span class="p">,</span> <span class="s1">&#39;Man&#39;</span><span class="p">]</span>
  <span class="nv">array.length = </span><span class="mi">2</span>
  <span class="nx">show</span> <span class="nx">array</span>

  <span class="p">),</span><span class="mi">300</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 